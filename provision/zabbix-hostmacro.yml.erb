# -*- yaml -*-
---
- hosts: all
  become: yes
  gather_facts: no
  vars:
    login_user: 'Admin'
    login_password: 'zabbix'
    server_url: 'http://45.62.210.188/zabbix/'
  tasks:
<%
{
  '2 49.212.131.170 ns6.n-z.jp' => {},
  '2 153.126.145.15 ns7.n-z.jp' => {},
  '2 49.212.140.21 ns8.fprog.org' => {},
  '3 lilo.linux.or.jp' => {},
  '4 bbs bbs.broad-e.co.jp' => {},
}.each do |host, data|
%>
  - name: '<%= host %>'
    zabbix_hostmacro:
      host_name: '<%= host %>'
      macro_name: 'ICMP_RESPONSE_TIME_WARN'
      macro_value: '0.2'
      login_user: "{{ login_user }}"
      login_password: "{{ login_password }}"
      # proxy:
      server_url: "{{ server_url }}"
      state: present
<% end %>
